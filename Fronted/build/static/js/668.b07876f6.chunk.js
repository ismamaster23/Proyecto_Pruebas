"use strict";(self.webpackChunkproyecto_nutricalc=self.webpackChunkproyecto_nutricalc||[]).push([[668],{2668:(e,r,t)=>{t.r(r),t.d(r,{default:()=>D});var i=t(5043),n=t(6213),s=t(2110),a=t(6494),o=t(4194),l=t(5795),c=t(1906),d=t(9650),h=t(3336),x=t(1806),A=t(4882),j=t(8076),p=t(2420),g=t(3460),u=t(2167),m=t(7392),y=t(35),v=t(6600),f=t(5316),C=t(8533),b=t(9347),k=t(141),w=t(5456),E=t(3560),S=t(3768),B=t(3216),I=t(3003),q=t(579);const D=()=>{const[e,r]=(0,i.useState)(""),[t,D]=(0,i.useState)([]),[F,N]=(0,i.useState)(!1),[P,_]=(0,i.useState)(null),[M,O]=(0,i.useState)({open:!1,severity:"",message:""}),[T,Z]=(0,i.useState)(null),[z,G]=(0,i.useState)(!1),H=(0,B.Zp)(),J=(0,I.d4)((e=>e.auth.email)),K=async e=>{try{const r=await n.A.get("http://192.168.0.18:5000/obtener",{params:{query:e,email:J}});D(r.data)}catch(t){var r;console.error("Error fetching data:",t),O({open:!0,severity:"error",message:"Error fetching data: ".concat(t.message," (Code: ").concat(null===(r=t.response)||void 0===r?void 0:r.status,")")}),D([])}};(0,i.useEffect)((()=>{K("")}),[]);const L=()=>{N(!1),_(null)},Q=()=>{G(!1),Z(null)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(s.A,{sx:{margin:"auto",marginTop:5,width:{xs:"100%",sm:"80%"}},children:(0,q.jsxs)(a.A,{children:[M.open&&(0,q.jsx)(o.A,{severity:M.severity,onClose:()=>{O({open:!1,severity:"",message:""})},sx:{marginBottom:2},children:M.message}),(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,q.jsx)(l.A,{label:"Buscar correo electr\xf3nico ",variant:"outlined",value:e,onChange:async e=>{const t=e.target.value;r(t),K(t)},sx:{width:{xs:"100%",sm:"70%"}}}),(0,q.jsx)(c.A,{variant:"contained",color:"primary",startIcon:(0,q.jsx)(k.A,{}),onClick:()=>{H("/paciente/new")},children:"Agregar persona"})]}),(0,q.jsx)(d.A,{component:h.A,children:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(A.A,{children:(0,q.jsxs)(j.A,{children:[(0,q.jsx)(p.A,{children:"Nombre"}),(0,q.jsx)(p.A,{children:"Apellidos"}),(0,q.jsx)(p.A,{children:"Correo"}),(0,q.jsx)(p.A,{align:"right",children:"Acciones"})]})}),(0,q.jsx)(g.A,{children:t.map(((e,r)=>(0,q.jsxs)(j.A,{children:[(0,q.jsx)(p.A,{children:e.nombre}),(0,q.jsx)(p.A,{children:e.apelPate+" "+e.apelMate}),(0,q.jsx)(p.A,{children:e.correo}),(0,q.jsx)(p.A,{align:"right",children:(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,q.jsx)(u.A,{title:"Informaci\xf3n",children:(0,q.jsx)(m.A,{color:"primary",onClick:()=>(async e=>{try{const r=await n.A.get("http://192.168.0.18:5000/obtener-paciente/".concat(e));r.data.datosDieta?(Z(r.data.datosDieta),G(!0)):O({open:!0,severity:"warning",message:"Datos de dieta no encontrados"})}catch(t){var r;console.error("Error fetching patient data:",t),O({open:!0,severity:"error",message:"Error fetching patient data: ".concat(t.message," (Code: ").concat(null===(r=t.response)||void 0===r?void 0:r.status,")")})}})(e.correo),children:(0,q.jsx)(w.A,{})})}),(0,q.jsx)(u.A,{title:"Editar",children:(0,q.jsx)(m.A,{color:"primary",onClick:()=>{return r=e.correo,void H("/paciente/update?correo=".concat(r));var r},children:(0,q.jsx)(E.A,{})})}),(0,q.jsx)(u.A,{title:"Borrar",children:(0,q.jsx)(m.A,{color:"secondary",onClick:()=>{return r=e.correo,_(r),void N(!0);var r},children:(0,q.jsx)(S.A,{})})})]})})]},r)))})]})})]})}),(0,q.jsxs)(y.A,{open:F,onClose:L,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,q.jsx)(v.A,{id:"alert-dialog-title",children:"Confirmar eliminaci\xf3n"}),(0,q.jsx)(f.A,{children:(0,q.jsx)(C.A,{id:"alert-dialog-description",children:"\xbfEst\xe1s seguro de que deseas eliminar este registro?"})}),(0,q.jsxs)(b.A,{children:[(0,q.jsx)(c.A,{onClick:L,color:"primary",children:"Cancelar"}),(0,q.jsx)(c.A,{onClick:async()=>{try{await n.A.delete("http://192.168.0.18:5000/delete/".concat(P)),K(e)}catch(t){var r;console.error("Error deleting data:",t),O({open:!0,severity:"error",message:"Error deleting data: ".concat(t.message," (Code: ").concat(null===(r=t.response)||void 0===r?void 0:r.status,")")})}finally{N(!1),_(null)}},color:"secondary",autoFocus:!0,children:"Eliminar"})]})]}),(0,q.jsxs)(y.A,{open:z,onClose:Q,"aria-labelledby":"info-dialog-title","aria-describedby":"info-dialog-description",children:[(0,q.jsx)(v.A,{id:"info-dialog-title",style:{textAlign:"center"},children:"Informaci\xf3n de la dieta diaria (Porciones alimenticias equivalentes)"}),(0,q.jsx)(f.A,{style:{textAlign:"center"},children:T?(0,q.jsx)(C.A,{id:"info-dialog-description",children:Object.entries(T).map((e=>{let[r,t]=e;return(0,q.jsxs)("div",{children:[(0,q.jsxs)("strong",{children:[r,":"]})," ",t]},r)}))}):(0,q.jsx)(C.A,{id:"info-dialog-description",children:"No se encontraron datos de la dieta."})}),(0,q.jsx)(b.A,{children:(0,q.jsx)(c.A,{onClick:Q,color:"primary",children:"Aceptar"})})]}),(0,q.jsx)("br",{})]})}}}]);
//# sourceMappingURL=668.b07876f6.chunk.js.map