{"version":3,"file":"static/js/668.b07876f6.chunk.js","mappings":"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","sources":["views/patients/Pacientes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    TextField,\r\n    IconButton,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n    Button,\r\n    Paper,\r\n    Tooltip,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Alert\r\n} from '@mui/material';\r\nimport { Add as AddIcon, Edit as EditIcon, Delete as DeleteIcon, Info as InfoIcon } from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\nconst Pacientes = () => {\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [selectedCorreo, setSelectedCorreo] = useState(null);\r\n    const [alert, setAlert] = useState({ open: false, severity: '', message: '' });\r\n    const [dietaData, setDietaData] = useState(null);\r\n    const [infoDialog, setInfoDialog] = useState(false);\r\n    const navigate = useNavigate();\r\n    const email = useSelector((state) => state.auth.email);\r\n\r\n    const fetchRecords = async (query) => {\r\n        try {\r\n            const response = await axios.get(`http://192.168.0.18:5000/obtener`, {\r\n                params: { query, email }\r\n            });\r\n            setSearchResults(response.data);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setAlert({\r\n                open: true,\r\n                severity: 'error',\r\n                message: `Error fetching data: ${error.message} (Code: ${error.response?.status})`\r\n            });\r\n            setSearchResults([]);\r\n        }\r\n    };    \r\n\r\n    useEffect(() => {\r\n        // Obtener todos los registros al cargar el componente\r\n        fetchRecords('');\r\n    }, []);\r\n\r\n    const handleSearchChange = async (event) => {\r\n        const value = event.target.value;\r\n        setSearchQuery(value);\r\n        fetchRecords(value);\r\n    };\r\n\r\n    const handleAddPerson = () => {\r\n        navigate('/paciente/new');\r\n    };\r\n\r\n    const handleEditPerson = (correo) => {\r\n        navigate(`/paciente/update?correo=${correo}`);\r\n    };\r\n\r\n    const handleDeletePerson = (correo) => {\r\n        setSelectedCorreo(correo);\r\n        setOpenDialog(true);\r\n    };\r\n\r\n    const handleConfirmDelete = async () => {\r\n        try {\r\n            await axios.delete(`http://192.168.0.18:5000/delete/${selectedCorreo}`);\r\n            // Refrescar los registros después de eliminar\r\n            fetchRecords(searchQuery);\r\n        } catch (error) {\r\n            console.error('Error deleting data:', error);\r\n            setAlert({\r\n                open: true,\r\n                severity: 'error',\r\n                message: `Error deleting data: ${error.message} (Code: ${error.response?.status})`\r\n            });\r\n        } finally {\r\n            setOpenDialog(false);\r\n            setSelectedCorreo(null);\r\n        }\r\n    };\r\n\r\n    const handleCancelDelete = () => {\r\n        setOpenDialog(false);\r\n        setSelectedCorreo(null);\r\n    };\r\n\r\n    const handleInfoPerson = async (correo) => {\r\n        try {\r\n            const response = await axios.get(`http://192.168.0.18:5000/obtener-paciente/${correo}`);\r\n            if (response.data.datosDieta) {\r\n                setDietaData(response.data.datosDieta);\r\n                setInfoDialog(true);\r\n            } else {\r\n                setAlert({\r\n                    open: true,\r\n                    severity: 'warning',\r\n                    message: 'Datos de dieta no encontrados'\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching patient data:', error);\r\n            setAlert({\r\n                open: true,\r\n                severity: 'error',\r\n                message: `Error fetching patient data: ${error.message} (Code: ${error.response?.status})`\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleCloseAlert = () => {\r\n        setAlert({ open: false, severity: '', message: '' });\r\n    };\r\n\r\n    const handleCloseInfoDialog = () => {\r\n        setInfoDialog(false);\r\n        setDietaData(null);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Card sx={{ margin: 'auto', marginTop: 5, width: { xs: '100%', sm: '80%' } }}>\r\n                <CardContent>\r\n                    {alert.open && (\r\n                        <Alert severity={alert.severity} onClose={handleCloseAlert} sx={{ marginBottom: 2 }}>\r\n                            {alert.message}\r\n                        </Alert>\r\n                    )}\r\n                    <div\r\n                        style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            marginBottom: 16,\r\n                        }}\r\n                    >\r\n                        <TextField\r\n                            label=\"Buscar correo electrónico \"\r\n                            variant=\"outlined\"\r\n                            value={searchQuery}\r\n                            onChange={handleSearchChange}\r\n                            sx={{ width: { xs: '100%', sm: '70%' } }}\r\n                        />\r\n                        <Button variant=\"contained\" color=\"primary\" startIcon={<AddIcon />} onClick={handleAddPerson}>\r\n                            Agregar persona\r\n                        </Button>\r\n                    </div>\r\n                    <TableContainer component={Paper}>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Nombre</TableCell>\r\n                                    <TableCell>Apellidos</TableCell>\r\n                                    <TableCell>Correo</TableCell>\r\n                                    <TableCell align=\"right\">Acciones</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {searchResults.map((row, index) => (\r\n                                    <TableRow key={index}>\r\n                                        <TableCell>{row.nombre}</TableCell>\r\n                                        <TableCell>{row.apelPate + \" \" + row.apelMate}</TableCell>\r\n                                        <TableCell>{row.correo}</TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '8px' }}>\r\n                                                <Tooltip title=\"Información\">\r\n                                                    <IconButton color=\"primary\" onClick={() => handleInfoPerson(row.correo)}>\r\n                                                        <InfoIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                                <Tooltip title=\"Editar\">\r\n                                                    <IconButton color=\"primary\" onClick={() => handleEditPerson(row.correo)}>\r\n                                                        <EditIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                                <Tooltip title=\"Borrar\">\r\n                                                    <IconButton color=\"secondary\" onClick={() => handleDeletePerson(row.correo)}>\r\n                                                        <DeleteIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                </CardContent>\r\n            </Card>\r\n            <Dialog\r\n                open={openDialog}\r\n                onClose={handleCancelDelete}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{\"Confirmar eliminación\"}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        ¿Estás seguro de que deseas eliminar este registro?\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleCancelDelete} color=\"primary\">\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button onClick={handleConfirmDelete} color=\"secondary\" autoFocus>\r\n                        Eliminar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Dialog\r\n                open={infoDialog}\r\n                onClose={handleCloseInfoDialog}\r\n                aria-labelledby=\"info-dialog-title\"\r\n                aria-describedby=\"info-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"info-dialog-title\" style={{ textAlign: 'center' }}>{\"Información de la dieta diaria (Porciones alimenticias equivalentes)\"}</DialogTitle>\r\n                <DialogContent style={{ textAlign: 'center' }}>\r\n                    {dietaData ? (\r\n                        <DialogContentText id=\"info-dialog-description\">\r\n                            {Object.entries(dietaData).map(([key, value]) => (\r\n                                <div key={key}><strong>{key}:</strong> {value}</div>\r\n                            ))}\r\n                        </DialogContentText>\r\n                    ) : (\r\n                        <DialogContentText id=\"info-dialog-description\">\r\n                            No se encontraron datos de la dieta.\r\n                        </DialogContentText>\r\n                    )}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleCloseInfoDialog} color=\"primary\">\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <br />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Pacientes;\r\n"],"names":["Pacientes","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","openDialog","setOpenDialog","selectedCorreo","setSelectedCorreo","alert","setAlert","open","severity","message","dietaData","setDietaData","infoDialog","setInfoDialog","navigate","useNavigate","email","useSelector","state","auth","fetchRecords","async","response","axios","get","params","query","data","error","_error$response","console","concat","status","useEffect","handleCancelDelete","handleCloseInfoDialog","_jsxs","_Fragment","children","_jsx","Card","sx","margin","marginTop","width","xs","sm","CardContent","Alert","onClose","handleCloseAlert","marginBottom","style","display","justifyContent","alignItems","TextField","label","variant","value","onChange","event","target","Button","color","startIcon","AddIcon","onClick","handleAddPerson","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","align","TableBody","map","row","index","nombre","apelPate","apelMate","correo","gap","Tooltip","title","IconButton","datosDieta","_error$response3","handleInfoPerson","InfoIcon","handleEditPerson","EditIcon","handleDeletePerson","DeleteIcon","Dialog","DialogTitle","id","DialogContent","DialogContentText","DialogActions","delete","_error$response2","autoFocus","textAlign","Object","entries","_ref","key"],"sourceRoot":""}