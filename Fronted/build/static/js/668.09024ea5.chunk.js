"use strict";(self.webpackChunkproyecto_nutricalc=self.webpackChunkproyecto_nutricalc||[]).push([[668],{2668:(e,r,a)=>{a.r(r),a.d(r,{default:()=>D});var s=a(5043),t=a(9722),i=a(2110),n=a(6494),o=a(4194),c=a(5795),l=a(1906),d=a(9650),h=a(3336),p=a(1806),x=a(4882),A=a(8076),j=a(2420),u=a(3460),g=a(8483),m=a(7392),y=a(35),b=a(6600),v=a(5316),f=a(8533),C=a(9347),k=a(141),w=a(5456),E=a(3560),S=a(3768),B=a(3216),I=a(3003),q=a(579);const D=()=>{const[e,r]=(0,s.useState)(""),[a,D]=(0,s.useState)([]),[F,N]=(0,s.useState)(!1),[P,_]=(0,s.useState)(null),[M,O]=(0,s.useState)({open:!1,severity:"",message:""}),[T,Z]=(0,s.useState)(null),[z,G]=(0,s.useState)(!1),H=(0,B.Zp)(),J=(0,I.d4)(e=>e.auth.email),K=async e=>{try{const r=await t.A.get("https://pruebas-back-50777bb3ad67.herokuapp.com/obtener",{params:{query:e,email:J}});D(r.data)}catch(a){var r;console.error("Error fetching data:",a),O({open:!0,severity:"error",message:"Error fetching data: ".concat(a.message," (Code: ").concat(null===(r=a.response)||void 0===r?void 0:r.status,")")}),D([])}};(0,s.useEffect)(()=>{K("")},[]);const L=()=>{N(!1),_(null)},Q=()=>{G(!1),Z(null)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{sx:{margin:"auto",marginTop:5,width:{xs:"100%",sm:"80%"}},children:(0,q.jsxs)(n.A,{children:[M.open&&(0,q.jsx)(o.A,{severity:M.severity,onClose:()=>{O({open:!1,severity:"",message:""})},sx:{marginBottom:2},children:M.message}),(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,q.jsx)(c.A,{label:"Buscar correo electr\xf3nico ",variant:"outlined",value:e,onChange:async e=>{const a=e.target.value;r(a),K(a)},sx:{width:{xs:"100%",sm:"70%"}}}),(0,q.jsx)(l.A,{variant:"contained",color:"primary",startIcon:(0,q.jsx)(k.A,{}),onClick:()=>{H("/paciente/new")},children:"Agregar persona"})]}),(0,q.jsx)(d.A,{component:h.A,children:(0,q.jsxs)(p.A,{children:[(0,q.jsx)(x.A,{children:(0,q.jsxs)(A.A,{children:[(0,q.jsx)(j.A,{children:"Nombre"}),(0,q.jsx)(j.A,{children:"Apellidos"}),(0,q.jsx)(j.A,{children:"Correo"}),(0,q.jsx)(j.A,{align:"right",children:"Acciones"})]})}),(0,q.jsx)(u.A,{children:a.map((e,r)=>(0,q.jsxs)(A.A,{children:[(0,q.jsx)(j.A,{children:e.nombre}),(0,q.jsx)(j.A,{children:e.apelPate+" "+e.apelMate}),(0,q.jsx)(j.A,{children:e.correo}),(0,q.jsx)(j.A,{align:"right",children:(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,q.jsx)(g.A,{title:"Informaci\xf3n",children:(0,q.jsx)(m.A,{color:"primary",onClick:()=>(async e=>{try{const r=await t.A.get("https://pruebas-back-50777bb3ad67.herokuapp.com/obtener-paciente/".concat(e));r.data.datosDieta?(Z(r.data.datosDieta),G(!0)):O({open:!0,severity:"warning",message:"Datos de dieta no encontrados"})}catch(a){var r;console.error("Error fetching patient data:",a),O({open:!0,severity:"error",message:"Error fetching patient data: ".concat(a.message," (Code: ").concat(null===(r=a.response)||void 0===r?void 0:r.status,")")})}})(e.correo),children:(0,q.jsx)(w.A,{})})}),(0,q.jsx)(g.A,{title:"Editar",children:(0,q.jsx)(m.A,{color:"primary",onClick:()=>{return r=e.correo,void H("/update?correo=".concat(r));var r},children:(0,q.jsx)(E.A,{})})}),(0,q.jsx)(g.A,{title:"Borrar",children:(0,q.jsx)(m.A,{color:"secondary",onClick:()=>{return r=e.correo,_(r),void N(!0);var r},children:(0,q.jsx)(S.A,{})})})]})})]},r))})]})})]})}),(0,q.jsxs)(y.A,{open:F,onClose:L,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,q.jsx)(b.A,{id:"alert-dialog-title",children:"Confirmar eliminaci\xf3n"}),(0,q.jsx)(v.A,{children:(0,q.jsx)(f.A,{id:"alert-dialog-description",children:"\xbfEst\xe1s seguro de que deseas eliminar este registro?"})}),(0,q.jsxs)(C.A,{children:[(0,q.jsx)(l.A,{onClick:L,color:"primary",children:"Cancelar"}),(0,q.jsx)(l.A,{onClick:async()=>{try{await t.A.delete("https://pruebas-back-50777bb3ad67.herokuapp.com/delete/".concat(P)),K(e)}catch(a){var r;console.error("Error deleting data:",a),O({open:!0,severity:"error",message:"Error deleting data: ".concat(a.message," (Code: ").concat(null===(r=a.response)||void 0===r?void 0:r.status,")")})}finally{N(!1),_(null)}},color:"secondary",autoFocus:!0,children:"Eliminar"})]})]}),(0,q.jsxs)(y.A,{open:z,onClose:Q,"aria-labelledby":"info-dialog-title","aria-describedby":"info-dialog-description",children:[(0,q.jsx)(b.A,{id:"info-dialog-title",style:{textAlign:"center"},children:"Informaci\xf3n de la dieta diaria (Porciones alimenticias equivalentes)"}),(0,q.jsx)(v.A,{style:{textAlign:"center"},children:T?(0,q.jsx)(f.A,{id:"info-dialog-description",children:Object.entries(T).map(e=>{let[r,a]=e;return(0,q.jsxs)("div",{children:[(0,q.jsxs)("strong",{children:[r,":"]})," ",a]},r)})}):(0,q.jsx)(f.A,{id:"info-dialog-description",children:"No se encontraron datos de la dieta."})}),(0,q.jsx)(C.A,{children:(0,q.jsx)(l.A,{onClick:Q,color:"primary",children:"Aceptar"})})]}),(0,q.jsx)("br",{})]})}}}]);
//# sourceMappingURL=668.09024ea5.chunk.js.map