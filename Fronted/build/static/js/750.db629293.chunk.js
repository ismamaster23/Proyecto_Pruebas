"use strict";(self.webpackChunkproyecto_nutricalc=self.webpackChunkproyecto_nutricalc||[]).push([[750],{9750:(e,a,o)=>{o.r(a),o.d(a,{default:()=>M});var t=o(5043),r=o(9252),s=o(2110),n=o(6494),l=o(5865),i=o(8903),d=o(5795),c=o(3193),u=o(9190),p=o(598),m=o(6990),h=o(1906),x=o(5397),v=o(4194),f=o(6060),b=o(6900),A=o(6240),g=o(344),y=o(3216),w=o(6213),j=o(3003),P=o(579);const C=(0,f.A)(r.A)((e=>{let{theme:a}=e;return{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:a.spacing(2),overflow:"hidden"}})),_=(0,f.A)(s.A)((e=>{let{theme:a}=e;return{width:"150%",maxWidth:"900px",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",[a.breakpoints.down("sm")]:{width:"100%",maxWidth:"none"}}})),I=(0,f.A)(n.A)((e=>{let{theme:a}=e;return{width:"100%",margin:"0 auto"}})),M=()=>{const e=(0,A.A)(),a=(0,g.A)(e.breakpoints.down("sm")),o=(0,y.Zp)(),r=(0,j.d4)((e=>e.auth.email)),[s,n]=(0,t.useState)({nombre:"",apellidoPaterno:"",apellidoMaterno:"",telefono:"",fechaNacimiento:"",ciudad:"",cedulaProfesional:"",sexo:"",correo:"",password_actual:"",password_nueva:"",confirmPassword:""}),[f,M]=(0,t.useState)({}),[N,L]=(0,t.useState)(!0),[S,q]=(0,t.useState)(!1),[E,T]=(0,t.useState)(""),[W,k]=(0,t.useState)("success");(0,t.useEffect)((()=>{(async()=>{try{const e=await w.A.get("http://192.168.0.18:5000/api/obtener_doctor",{params:{correo:r}});n({...e.data,password_actual:"",password_nueva:"",confirmPassword:""})}catch(e){console.error("Error al cargar los datos del doctor:",e)}})()}),[r]);const O=e=>{const{name:a,value:o}=e.target;n({...s,[a]:o});let t={...f};if("telefono"===a&&(!/^\d*$/.test(o)||o.length>10?t.telefono="Solo se permiten caracteres num\xe9ricos y un m\xe1ximo de 10 d\xedgitos.":delete t.telefono),"fechaNacimiento"===a){const e=new Date,a=new Date(o);e.getFullYear(),a.getFullYear();a>e.setFullYear(e.getFullYear()-18)||a<e.setFullYear(e.getFullYear()-100)?t.fechaNacimiento="La fecha de nacimiento debe estar entre 18 y 100 a\xf1os.":delete t.fechaNacimiento}if("confirmPassword"===a||"password_nueva"===a){const{password_nueva:e,confirmPassword:r}={...s,[a]:o};e&&e!==r?(L(!1),t.confirmPassword="Las contrase\xf1as no coinciden."):(L(!0),delete t.confirmPassword)}M(t)},F=()=>{q(!1)};return(0,P.jsxs)(C,{children:[(0,P.jsx)(_,{children:(0,P.jsxs)(I,{children:[(0,P.jsx)(l.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Editar Informaci\xf3n"}),(0,P.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:async e=>{if(e.preventDefault(),(()=>{let e={};return e.nombre=s.nombre?"":"Este campo es requerido.",e.apellidoPaterno=s.apellidoPaterno?"":"Este campo es requerido.",e.apellidoMaterno=s.apellidoMaterno?"":"Este campo es requerido.",e.telefono=s.telefono?"":"Este campo es requerido.",e.fechaNacimiento=s.fechaNacimiento?"":"Este campo es requerido.",e.ciudad=s.ciudad?"":"Este campo es requerido.",e.cedulaProfesional=s.cedulaProfesional?"":"Este campo es requerido.",e.sexo=s.sexo?"":"Este campo es requerido.",s.password_nueva&&!s.password_actual&&(e.password_actual="Este campo es requerido para cambiar la contrase\xf1a."),s.password_nueva&&s.password_nueva!==s.confirmPassword&&(e.confirmPassword="Las contrase\xf1as no coinciden."),M(e),Object.values(e).every((e=>""===e))})()&&N)try{await w.A.put("http://192.168.0.18:5000/api/editar_doctor",{...s,correo:r});T("Datos actualizados con \xe9xito"),k("success"),q(!0),o("/pacientes")}catch(l){var a,t,n;console.error("Error al actualizar los datos del doctor:",(null===(a=l.response)||void 0===a?void 0:a.data)||l.message),T("Error ".concat(null===(t=l.response)||void 0===t?void 0:t.status,": ").concat((null===(n=l.response)||void 0===n?void 0:n.data.message)||l.message)),k("error"),q(!0)}},children:(0,P.jsxs)(i.Ay,{container:!0,spacing:a?2:3,children:[(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Nombre",variant:"outlined",name:"nombre",value:s.nombre,onChange:O,error:!!f.nombre,helperText:f.nombre,InputLabelProps:{style:{color:f.nombre?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Apellido Paterno",variant:"outlined",name:"apellidoPaterno",value:s.apellidoPaterno,onChange:O,error:!!f.apellidoPaterno,helperText:f.apellidoPaterno,InputLabelProps:{style:{color:f.apellidoPaterno?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Apellido Materno",variant:"outlined",name:"apellidoMaterno",value:s.apellidoMaterno,onChange:O,error:!!f.apellidoMaterno,helperText:f.apellidoMaterno,InputLabelProps:{style:{color:f.apellidoMaterno?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"N\xfamero de Tel\xe9fono",variant:"outlined",name:"telefono",value:s.telefono,onChange:O,error:!!f.telefono,helperText:f.telefono,inputProps:{maxLength:10},InputLabelProps:{style:{color:f.telefono?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Fecha de Nacimiento",variant:"outlined",type:"date",InputLabelProps:{shrink:!0},name:"fechaNacimiento",value:s.fechaNacimiento,onChange:O,error:!!f.fechaNacimiento,helperText:f.fechaNacimiento,InputLabelProps:{style:{color:f.fechaNacimiento?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsxs)(c.A,{fullWidth:!0,variant:"outlined",error:!!f.ciudad,children:[(0,P.jsx)(u.A,{required:!0,style:{color:f.ciudad?"red":""},children:"Ciudad"}),(0,P.jsxs)(p.A,{label:"Ciudad",name:"ciudad",value:s.ciudad,onChange:O,children:[(0,P.jsx)(m.A,{value:"mexico",children:"M\xe9xico"}),(0,P.jsx)(m.A,{value:"estado_mexico",children:"Estado de M\xe9xico"}),(0,P.jsx)(m.A,{value:"puebla",children:"Puebla"}),(0,P.jsx)(m.A,{value:"tlaxcala",children:"Tlaxcala"})]}),f.ciudad&&(0,P.jsx)(l.A,{color:"error",children:f.ciudad})]})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"C\xe9dula Profesional",variant:"outlined",name:"cedulaProfesional",value:s.cedulaProfesional,onChange:O,error:!!f.cedulaProfesional,helperText:f.cedulaProfesional,InputLabelProps:{style:{color:f.cedulaProfesional?"red":""}},required:!0})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsxs)(c.A,{fullWidth:!0,variant:"outlined",error:!!f.sexo,children:[(0,P.jsx)(u.A,{required:!0,style:{color:f.sexo?"red":""},children:"Sexo"}),(0,P.jsxs)(p.A,{label:"Sexo",name:"sexo",value:s.sexo,onChange:O,children:[(0,P.jsx)(m.A,{value:"hombre",children:"Hombre"}),(0,P.jsx)(m.A,{value:"mujer",children:"Mujer"})]}),f.sexo&&(0,P.jsx)(l.A,{color:"error",children:f.sexo})]})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Correo Electr\xf3nico",variant:"outlined",name:"correo",value:s.correo,disabled:!0,error:!!f.correo,helperText:f.correo,InputLabelProps:{style:{color:f.correo?"red":""}}})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Contrase\xf1a Actual",variant:"outlined",type:"password",name:"password_actual",value:s.password_actual,onChange:O,error:!!f.password_actual,helperText:f.password_actual,InputLabelProps:{style:{color:f.password_actual?"red":""}}})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Nueva Contrase\xf1a",variant:"outlined",type:"password",name:"password_nueva",value:s.password_nueva,onChange:O,error:!!f.password_nueva,helperText:f.password_nueva,InputLabelProps:{style:{color:f.password_nueva?"red":""}}})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(d.A,{fullWidth:!0,label:"Confirmar Nueva Contrase\xf1a",variant:"outlined",type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:O,error:!!f.confirmPassword,helperText:f.confirmPassword,InputLabelProps:{style:{color:f.confirmPassword?"red":""}}})}),(0,P.jsx)(i.Ay,{item:!0,xs:12,children:(0,P.jsx)(b.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,P.jsx)(h.A,{variant:"contained",color:"secondary",fullWidth:!0,type:"submit",disabled:!N||Object.values(f).some((e=>""!==e)),children:"Enviar"})})})]})})]})}),(0,P.jsx)(x.A,{open:S,autoHideDuration:6e3,onClose:F,children:(0,P.jsx)(v.A,{onClose:F,severity:W,sx:{width:"100%"},children:E})})]})}},6990:(e,a,o)=>{o.d(a,{A:()=>_});var t=o(8587),r=o(8168),s=o(5043),n=o(8387),l=o(8606),i=o(7266),d=o(4535),c=o(1475),u=o(2876),p=o(1347),m=o(3383),h=o(5013),x=o(5849),v=o(7056);const f=(0,v.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const b=(0,v.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var A=o(5671),g=o(2400);function y(e){return(0,g.Ay)("MuiMenuItem",e)}const w=(0,v.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var j=o(579);const P=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],C=(0,d.Ay)(m.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.dense&&a.dense,o.divider&&a.divider,!o.disableGutters&&a.gutters]}})((e=>{let{theme:a,ownerState:o}=e;return(0,r.A)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(w.selected)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,i.X4)(a.palette.primary.main,a.palette.action.selectedOpacity),["&.".concat(w.focusVisible)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,i.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},["&.".concat(w.selected,":hover")]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,i.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,i.X4)(a.palette.primary.main,a.palette.action.selectedOpacity)}},["&.".concat(w.focusVisible)]:{backgroundColor:(a.vars||a).palette.action.focus},["&.".concat(w.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity},["& + .".concat(f.root)]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},["& + .".concat(f.inset)]:{marginLeft:52},["& .".concat(A.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(A.A.inset)]:{paddingLeft:36},["& .".concat(b.root)]:{minWidth:36}},!o.dense&&{[a.breakpoints.up("sm")]:{minHeight:"auto"}},o.dense&&(0,r.A)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,{["& .".concat(b.root," svg")]:{fontSize:"1.25rem"}}))})),_=s.forwardRef((function(e,a){const o=(0,u.A)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:d="li",dense:c=!1,divider:m=!1,disableGutters:v=!1,focusVisibleClassName:f,role:b="menuitem",tabIndex:A,className:g}=o,w=(0,t.A)(o,P),_=s.useContext(p.A),I=s.useMemo((()=>({dense:c||_.dense||!1,disableGutters:v})),[_.dense,c,v]),M=s.useRef(null);(0,h.A)((()=>{i&&M.current&&M.current.focus()}),[i]);const N=(0,r.A)({},o,{dense:I.dense,divider:m,disableGutters:v}),L=(e=>{const{disabled:a,dense:o,divider:t,disableGutters:s,selected:n,classes:i}=e,d={root:["root",o&&"dense",a&&"disabled",!s&&"gutters",t&&"divider",n&&"selected"]},c=(0,l.A)(d,y,i);return(0,r.A)({},i,c)})(o),S=(0,x.A)(M,a);let q;return o.disabled||(q=void 0!==A?A:-1),(0,j.jsx)(p.A.Provider,{value:I,children:(0,j.jsx)(C,(0,r.A)({ref:S,role:b,tabIndex:q,component:d,focusVisibleClassName:(0,n.A)(L.focusVisible,f),className:(0,n.A)(L.root,g)},w,{ownerState:N,classes:L}))})}))}}]);
//# sourceMappingURL=750.db629293.chunk.js.map